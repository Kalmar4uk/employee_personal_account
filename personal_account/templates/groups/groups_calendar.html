{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="section">
    <div class="section-header">
        <h2 class="section-title">График смен {{ month_data }} {{ year_data }}</h2>
        <form method="get" class="compact-filter">
            <select id="month" name="month" class="compact-select">
                <option value="">Выбрать месяц</option>
                <option value="1" {% if request.GET.month == '1' %}selected{% endif %}>Январь</option>
                <option value="2" {% if request.GET.month == '2' %}selected{% endif %}>Февраль</option>
                <option value="3" {% if request.GET.month == '3' %}selected{% endif %}>Март</option>
                <option value="4" {% if request.GET.month == '4' %}selected{% endif %}>Апрель</option>
                <option value="5" {% if request.GET.month == '5' %}selected{% endif %}>Май</option>
                <option value="6" {% if request.GET.month == '6' %}selected{% endif %}>Июнь</option>
                <option value="7" {% if request.GET.month == '7' %}selected{% endif %}>Июль</option>
                <option value="8" {% if request.GET.month == '8' %}selected{% endif %}>Август</option>
                <option value="9" {% if request.GET.month == '9' %}selected{% endif %}>Сентябрь</option>
                <option value="10" {% if request.GET.month == '10' %}selected{% endif %}>Октябрь</option>
                <option value="11" {% if request.GET.month == '11' %}selected{% endif %}>Ноябрь</option>
                <option value="12" {% if request.GET.month == '12' %}selected{% endif %}>Декабрь</option>
            </select>
            <select id="year" name="year" class="compact-select">
                <option value="">Выбрать год</option>
                <option value="2025" {% if request.GET.year == '2025' %}selected{% endif %}>2025</option>
                <option value="2026" {% if request.GET.year == '2026' %}selected{% endif %}>2026</option>
            </select>
            <button type="submit" class="compact-btn">Применить</button>
            <a href="{% url 'users:group_shifts' request.resolver_match.kwargs.id %}" class="compact-btn">Сбросить</a>
        </form>
    </div>
    
    <!-- Контейнер для недель -->
    <div class="weeks-container" id="weeks-container">
        <!-- Недели будут сгенерированы JS -->
    </div>
</div>
<script>
    window.shiftsData = JSON.parse('{{ schedule|escapejs }}');
    window.month = parseInt('{{ month_for_js }}');
    window.year = parseInt('{{ year_data }}');
</script>
<script src="{% static 'js/groups_calendar.js' %}"></script>
{% endblock %}